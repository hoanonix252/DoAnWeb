<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết sản phẩm</title>
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css">
    <link rel="stylesheet" href="../CSS/product-detail.css">
    <script type="text/javascript" src="../js/angular.js"></script>
    <script>
        var urlparams = new URLSearchParams(location.search);
        var HinhSP = urlparams.get("hinh")
    </script>
    <script>
        let app = angular.module("angularApp", [])
        app.controller("ProductController", ($scope, $http) => {
            $http({
                method: "GET",
                url: "../data/products.json",
            }).then(
                function success(response) {
                    $scope.selectedProduct = response.data.find(value => value.Hinh == HinhSP);
                },
                function error(response) {
                    $scope.error = response.statusText;
                });
            $scope.addToCart = (product) => {
                let cartItems = Object.values(
                    JSON.parse(localStorage.getItem("productsInCart")));
                product.inCart = parseInt(document.getElementById('quantity').innerHTML);
                cartItems.push(product);
                localStorage.setItem("productsInCart", JSON.stringify([...cartItems]));


                let productNumbers = (localStorage.getItem("cartNumbers") || 0);
                productNumbers = parseInt(productNumbers) + product.inCart;
                localStorage.setItem("cartNumbers", productNumbers);
                document.querySelector(".csw-btn-button span").textContent = productNumbers;
            };        
    })
    </script>

</head>

<body ng-app="angularApp">
    <div class="container">
        <!--Header-->
        <!--Header-->
        <div class="header">
            <div class="header-container">
                <div class="toggle">
                    <i class="fas fa-bars"></i>
                </div>
                <div id="news">
                    <span>Miễn phí vận chuyển </span> cho đơn hàng từ 600k

                </div>
                <div class="logo">
                    <a href="./Homepage.html">MY CHOICE</a>

                </div>
                <div id="search">
                    <form class="search-container">
                        <input id="product" class="search__input" type="text" placeholder="Search..." name="search">
                        <button type="button" onclick="location.href='./shoppingcart.html'" class="csw-btn-button"><i
                                class="fa fa-shopping-cart"></i>
                            <span>0</span>
                        </button>
                        <button type="submit"><i class="fa fa-search"></i></button>
                    </form>
                </div>
            </div>
            <hr>
            <!--Menu-->
            <div class="menu">
                <div>
                    <nav>
                        <ul id="main-menu">
                            <li>
                                <a href="./gioithieu.html">Giới thiệu </a>
                            </li>
                            <div class="menu--space">|</div>
                            <li><a href="./Product_main.html">Sản phẩm <i class="fa fa-caret-down"
                                        style="padding:5px;"></i></a>
                                <ul class="menu-dropdown">
                                    <div>
                                        <li><a href="./Product_cleanser.html">Sữa rửa mặt & Tẩy trang</a></li>
                                        <li><a href="./Product_toner.html">Toner</a></li>
                                        <li><a href="./Product_tdc.html">Loại bỏ tế bào chết</a></li>
                                        <li><a href="./Product_moisturizing.html">Kem dưỡng ẩm</a></li>
                                        <li><a href="./Product_sunscreen.html">Kem chống nắng</a></li>
                                        <li><a href="./Product_mask.html">Mặt nạ</a></li>
                                    </div>
                                </ul>
                            </li>
                            <div class="menu--space">|</div>
                            <li><a href="#thanhphan">Thành phần <i class="fa fa-caret-down"
                                        style="padding:5px;"></i></a>
                                <ul class="menu-dropdown">
                                    <div>
                                        <li><a href="./AHA.html">AHA</a></li>
                                        <li><a href="./BHA.html">BHA</a></li>
                                        <li><a href="./Vitamin C.html">Vitamin C</a></li>
                                    </div>
                                </ul>
                            </li>
                            <div class="menu--space">|</div>
                            <li><a href="#kienthuc">Kiến thức chăm sóc da <i class="fa fa-caret-down"
                                        style="padding:5px;"></i></a>
                                <ul class="menu-dropdown">
                                    <div>
                                        <li><a href="./chamsocdathuong.html">Chăm sóc da thường</a></li>
                                        <li><a href="./chamsocdamun.html">Chăm sóc da mụn</a></li>
                                        <li><a href="./chamsocdahonhop.html">Chăm sóc da hỗn hợp</a></li>
                                        <li><a href="./chamsocdanhaycam.html">Chăm sóc da nhạy cảm</a></li>
                                        <li><a href="./chamsocdakho.html">Chăm sóc da khô</a></li>
                                        <li><a href="./chamsocdadau.html">Chăm sóc da dầu</a></li>
                                    </div>
                                </ul>
                            </li>
                            <div class="menu--space">|</div>
                            <li><a href="./khuyenmai.html" target="_parent">Khuyến mãi</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        <!-- Nội dung -->
        <div class="main">
            <div class="product__1" ng-controller="ProductController">
                <div class="product__image-1">
                    <img ng-src="../images/{{selectedProduct.HinhFull}}.jpg" alt="">
                </div>
                <div class="product__description-1">
                    <div class="detail__header">
                        <h1>{{selectedProduct.Ten}}</h1>
                        <h2>{{selectedProduct.Gia}} </h2>
                    </div>
                    <p>
                    <h3>Mô tả</h3>
                    <p>{{selectedProduct.ChiTiet.MoTa}} </p>
                    <h4> ĐẶC ĐIỂM VÀ CÔNG DỤNG</h4>
                    <p>
                        {{selectedProduct.ChiTiet.CongDung}}
                    </p>
                    <br>

                    <h4> LOẠI DA PHÙ HỢP</h4>
                    {{selectedProduct.ChiTiet.LoaiSP}}
                    </p>
                    <hr>
                    <div class="field__payment">
                        <div>
                            <label for="quantity">Số lượng</label>
                            <input type="button" value="-"
                                onclick="updateItemQuantity(document.getElementById('quantity'), -1)">
                            <span id="quantity" name="" class="input-quantity">1</span>
                            <input type="button" value="+"
                                onclick="updateItemQuantity(document.getElementById('quantity'), 1)">
                        </div>
                        <div class="button-detail">
                            <button class="themvaogio" ng-click="addToCart(selectedProduct)">
                                <i class="fas fa-shopping-cart"></i> THÊM VÀO GIỎ HÀNG
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer" style="margin-top:140px;">
            <div class="footer-container">
                <div class="footer-item1">
                    <h4>BẠN CÓ PHẢI CHUYÊN GIA Y TẾ?</h4>
                    <p>Liên hệ chúng tôi </p>
                    <hr width="120px">
                </div>
                <div>
                    <h4>TRỢ GIÚP & LIÊN HỆ</h4>
                    <p>Liên hệ chúng tôi</p>
                    <hr width="120px">
                </div>
                <div style="max-width: 600px;">MY CHOICE là một thương hiệu được xây dựng dựa trên thấu hiểu sinh học
                    và an
                    toàn da liễu nhằm bảo vệ hệ sinh thái và sức khỏe làn da. Mang lại hiệu quả lâu dài.</div>
            </div>
            <div class="footer-item2">
                <h3>HỆ THỐNG SHOWROOM</h3>
                <hr style="width: 230px;">
                <h4>HỒ CHÍ MINH</h4>
                <p>Địa chỉ: 669 QL1A, khu phố 3, Thủ Đức, Thành phố Hồ Chí Minh</p>
            </div>

        </div>
    </div>
    <script src="../js/product-detail.js"></script>
</body>

</html>